### Generate File

Use compilation.assets, this is the file output array.

```javascript
CustomPlugin.prototype.apply = function(compiler) {
  cp.plugin('emit', function(compilation, callback) {
    var filelist = 'In this build:\n';

    for (var filename in compilation.assets) {
      filelist += ('-' + filename + '\n')
    }

    compilation.assets['filelist.md'] = {
      source: function() {
        return filelist
      },
      size: function() {
        return filelist.length;
      }
    }

    callback()
  })
}
```

### Detecting Chunks file

Use compilation.chunks to trace the chunks file

```javascript
// compilation.modules: An array of modules (built inputs) in the compilation. Each module manages the build of a raw file from your source library.
// module.fileDependencies: An array of source file paths included into a module. This includes the source JavaScript file itself (ex: index.js), and all dependency asset files (stylesheets, images, etc) that it has required. Reviewing dependencies is useful for seeing what source files belong to a module.
// compilation.chunks: An array of chunks (build outputs) in the compilation. Each chunk manages the composition of a final rendered assets.
// chunk.modules: An array of modules that are included into a chunk. By extension, you may look through each module's dependencies to see what raw source files fed into a chunk.
// chunk.files: An array of output filenames generated by the chunk. You may access these asset sources from the compilation.assets table.
CustomPlugin.prototype.apply = function(compiler) {
  var cp = compiler
  cp.plugin('emit', function(compilation, callback) {
    // get total chunk file <-- input file
    compilation.chunks.forEach(function(chunk) {
      // loop to get single chunk file
      chunk.modules.forEach(function(module) {
        // single file dependencies
        if(module.fileDependencies)
          module.fileDependencies.forEach(function(filePath) {
            // console.log(filePath)
          })
      })
      // output complete chunk file
      // filename -> build.js
      chunk.files.forEach(function(filename) {
        var source = compilation.assets[filename].source()
      })
    })
    callback()
  })
}
```

## Watch Chunks file change

Similar to the watch graph let you can watch the file change.
The same code always got the same hash code, so you can watch the file change by hash.

```javascript
CustomPlugin.prototype.apply = function(compiler) {
  var cp = compiler
  cp.plugin('emit', function(compilation, callback) {
    const checkoutChunks = compilation.chunks.filter(function(chunk) {
      const oldVersion = this.chunkVersions[chunk.name];
      this.chunkVersions[chunk.name] = chunk.hash;
      return chunk.hash !== oldVersion;
    }.bind(this))
    callback()
  }.bind(this))
}
```
